<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: LDAP::Server::Operation</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (O)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../LDAP.html" title="LDAP (module)">LDAP</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Server.html" title="LDAP::Server (class)">Server</a></span></span>
     &raquo; 
    <span class="title">Operation</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: LDAP::Server::Operation
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">LDAP::Server::Operation</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ldap/server/operation.rb<span class="defines">,<br />
  lib/ldap/server/util.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Object to handle a single LDAP request. Typically you would subclass this
object and override methods &#8216;simple_bind&#8217;, &#8216;search&#8217;
etc. The do_xxx methods are internal, and handle the parsing of requests
and the sending of responses.
</p>


  </div>
</div>
<div class="tags">
  
</div>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#join_dn-class_method" title="join_dn (class method)">+ (Object) <strong>join_dn</strong>(elements) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Reverse of split_dn.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#split_dn-class_method" title="split_dn (class method)">+ (Object) <strong>split_dn</strong>(dn) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Split dn string into its component parts, returning.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">- (Object) <strong>add</strong>(dn, av) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle an add request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#anonymous%3F-instance_method" title="#anonymous? (instance method)">- (Boolean) <strong>anonymous?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return true if connection is not authenticated.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributelist-instance_method" title="#attributelist (instance method)">- (Object) <strong>attributelist</strong>(set) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
reformat ASN1 into attr=>[vals].
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compare-instance_method" title="#compare (instance method)">- (Object) <strong>compare</strong>(entry, attr, val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a compare request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#del-instance_method" title="#del (instance method)">- (Object) <strong>del</strong>(dn) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a del request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_add-instance_method" title="#do_add (instance method)">- (Object) <strong>do_add</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_bind-instance_method" title="#do_bind (instance method)">- (Object) <strong>do_bind</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
######################################## # Methods to parse each request
type ### ########################################.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_compare-instance_method" title="#do_compare (instance method)">- (Object) <strong>do_compare</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_del-instance_method" title="#do_del (instance method)">- (Object) <strong>do_del</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_modify-instance_method" title="#do_modify (instance method)">- (Object) <strong>do_modify</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_modifydn-instance_method" title="#do_modifydn (instance method)">- (Object) <strong>do_modifydn</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_search-instance_method" title="#do_search (instance method)">- (Object) <strong>do_search</strong>(protocolOp, controls) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Operation) <strong>initialize</strong>(connection, messageID) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An instance of this object is created by the Connection object for each
operation which is requested by the client.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-instance_method" title="#log (instance method)">- (Object) <strong>log</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Send a log message.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_exception-instance_method" title="#log_exception (instance method)">- (Object) <strong>log_exception</strong>(e) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Send an exception report to the log.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#modify-instance_method" title="#modify (instance method)">- (Object) <strong>modify</strong>(dn, modification) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a modify request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#modifydn-instance_method" title="#modifydn (instance method)">- (Object) <strong>modifydn</strong>(entry, newrdn, deleteoldrdn, newSuperior) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a modifydn request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">- (Object) <strong>search</strong>(basedn, scope, deref, filter, attrs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a search request; override this.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_AddResponse-instance_method" title="#send_AddResponse (instance method)">- (Object) <strong>send_AddResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_BindResponse-instance_method" title="#send_BindResponse (instance method)">- (Object) <strong>send_BindResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_CompareResponse-instance_method" title="#send_CompareResponse (instance method)">- (Object) <strong>send_CompareResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_DelResponse-instance_method" title="#send_DelResponse (instance method)">- (Object) <strong>send_DelResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_ExtendedResponse-instance_method" title="#send_ExtendedResponse (instance method)">- (Object) <strong>send_ExtendedResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_LDAPMessage-instance_method" title="#send_LDAPMessage (instance method)">- (Object) <strong>send_LDAPMessage</strong>(protocolOp, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
################################################ # Utility methods to send
protocol responses ### ################################################.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_LDAPResult-instance_method" title="#send_LDAPResult (instance method)">- (Object) <strong>send_LDAPResult</strong>(tag, resultCode, opt = {}) {|seq| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_ModifyDNResponse-instance_method" title="#send_ModifyDNResponse (instance method)">- (Object) <strong>send_ModifyDNResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_ModifyResponse-instance_method" title="#send_ModifyResponse (instance method)">- (Object) <strong>send_ModifyResponse</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_SearchResultDone-instance_method" title="#send_SearchResultDone (instance method)">- (Object) <strong>send_SearchResultDone</strong>(resultCode, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_SearchResultEntry-instance_method" title="#send_SearchResultEntry (instance method)">- (Object) <strong>send_SearchResultEntry</strong>(dn, avs, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Send a found entry.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_SearchResultReference-instance_method" title="#send_SearchResultReference (instance method)">- (Object) <strong>send_SearchResultReference</strong>(urls, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#server_sizelimit-instance_method" title="#server_sizelimit (instance method)">- (Object) <strong>server_sizelimit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Server-set maximum size limit.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#server_timelimit-instance_method" title="#server_timelimit (instance method)">- (Object) <strong>server_timelimit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Server-set maximum time limit.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#simple_bind-instance_method" title="#simple_bind (instance method)">- (Object) <strong>simple_bind</strong>(version, dn, password) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Handle a simple bind request; raise an exception if the bind is not
acceptable, otherwise just return to accept the bind.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="LDAP::Server::Operation (class)">Operation</a></span></tt>) <strong>initialize</strong>(connection, messageID) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An instance of this object is created by the Connection object for each
operation which is requested by the client. If you subclass Operation, and
you override initialize, make sure you call &#8216;super&#8217;.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 30</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id messageID'>messageID</span><span class='rparen'>)</span>
  <span class='ivar'>@connection</span> <span class='op'>=</span> <span class='id connection'>connection</span>
  <span class='ivar'>@respEnvelope</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='lbracket'>[</span>
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Integer</span><span class='lparen'>(</span><span class='id messageID'>messageID</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='comment'># protocolOp,
</span>    <span class='comment'># controls [0] OPTIONAL,
</span>  <span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@schema</span> <span class='op'>=</span> <span class='ivar'>@connection</span><span class='period'>.</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:schema</span><span class='rbracket'>]</span>
  <span class='ivar'>@server</span> <span class='op'>=</span> <span class='ivar'>@connection</span><span class='period'>.</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:server</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="join_dn-class_method">
  
    + (<tt>Object</tt>) <strong>join_dn</strong>(elements) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Reverse of split_dn. Join [elements&#8230;] where each element can be
attr=&gt;val,&amp;attr=&gt;val,&amp;#8230; or [[attr,val],&#8230;] or just [attr,val]
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/util.rb', line 66</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id join_dn'>join_dn</span><span class='lparen'>(</span><span class='id elements'>elements</span><span class='rparen'>)</span>
  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id elements'>elements</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id elem'>elem</span><span class='op'>|</span>
    <span class='id av'>av</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id elem'>elem</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id elem'>elem</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id elem'>elem</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id elem'>elem</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attr'>attr</span><span class='comma'>,</span><span class='id val'>val</span><span class='op'>|</span>
      <span class='id av'>av</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id av'>av</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

      <span class='id av'>av</span> <span class='op'>&lt;&lt;</span> <span class='id attr'>attr</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
                 <span class='id val'>val</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^([# ])</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\\\\\1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span>
                 <span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>( )$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\\\\\1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span>
                 <span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([,+&quot;\\&lt;&gt;;])</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\\\\\1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id dn'>dn</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id dn'>dn</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id dn'>dn</span> <span class='op'>&lt;&lt;</span> <span class='id av'>av</span>
  <span class='kw'>end</span>
  <span class='id dn'>dn</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="split_dn-class_method">
  
    + (<tt>Object</tt>) <strong>split_dn</strong>(dn) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Split dn string into its component parts, returning
</p>
<pre class="code">
 [ {attr=&gt;val}, {attr=&gt;val}, ... ]
</pre>
<p>
This is pretty horrible legacy stuff from X500; see RFC2253 for the full
gore. It&#8217;s stupid that the LDAP protocol sends the DN in string form,
rather than in ASN1 form (as it does with search filters, for example),
even though the DN syntax is defined in terms of ASN1!
</p>
<p>
Attribute names are downcased, but values are not. For any case-insensitive
attributes it&#8217;s up to you to downcase them.
</p>
<p>
Note that only v2 clients should add extra space around the comma. This is
accepted, and so is semicolon instead of comma, but the full RFC1779
backwards-compatibility rules (e.g. quoted values) are not implemented.
</p>
<p>
I <b>think</b> these functions will work correctly with UTF8-encoded
characters, given that a multibyte UTF8 character does not contain the
bytes 00-7F and therefore we cannot confuse &#8217;\&#8217;,
&#8217;+&#8217; etc
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/util.rb', line 34</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id split_dn'>split_dn</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='rparen'>)</span>
  <span class='comment'># convert \\ to \5c, \+ to \2b etc
</span>  <span class='id dn2'>dn2</span> <span class='op'>=</span> <span class='id dn'>dn</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\([ #,+&quot;\\&lt;&gt;;])</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\%02x</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='backref'>$1</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>

  <span class='comment'># Now we know that \\ and \, do not exist, it's safe to split
</span>  <span class='id parts'>parts</span> <span class='op'>=</span> <span class='id dn2'>dn2</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*[,;]\s*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

  <span class='id parts'>parts</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id part'>part</span><span class='op'>|</span>
    <span class='id res'>res</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='comment'># Split each part into attr=val+attr=val
</span>    <span class='id avs'>avs</span> <span class='op'>=</span> <span class='id part'>part</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

    <span class='id avs'>avs</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id av'>av</span><span class='op'>|</span>
      <span class='comment'># These should all be of form attr=value
</span>      <span class='kw'>unless</span> <span class='id av'>av</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^([^=]+)=(.*)$</span><span class='regexp_end'>/</span></span>
        <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>ProtocolError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad DN component: </span><span class='embexpr_beg'>#{</span><span class='id av'>av</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id val'>val</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id downcase'>downcase</span><span class='comma'>,</span> <span class='backref'>$2</span>
      <span class='comment'># Now we can decode those bits
</span>      <span class='id attr'>attr</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\([a-f0-9][a-f0-9])</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span><span class='period'>.</span><span class='id chr'>chr</span> <span class='rbrace'>}</span>
      <span class='id val'>val</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\([a-f0-9][a-f0-9])</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span><span class='period'>.</span><span class='id chr'>chr</span> <span class='rbrace'>}</span>
      <span class='id res'>res</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id val'>val</span>
    <span class='kw'>end</span>
    <span class='id res'>res</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add-instance_method">
  
    - (<tt>Object</tt>) <strong>add</strong>(dn, av) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle an add request; override this
</p>
<p>
Parameters are the dn of the entry to add, and a hash of
</p>
<pre class="code">
  attr=&gt;[val...]
</pre>
<p>
Raise an exception if there is a problem; it is up to you to check that the
connection has sufficient authorisation using @connection.binddn
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 462</span>

<span class='kw'>def</span> <span class='id add'>add</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='comma'>,</span> <span class='id av'>av</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>add not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="anonymous?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>anonymous?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return true if connection is not authenticated
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/util.rb', line 10</span>

<span class='kw'>def</span> <span class='id anonymous?'>anonymous?</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id binddn'>binddn</span><span class='period'>.</span><span class='id nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attributelist-instance_method">
  
    - (<tt>Object</tt>) <strong>attributelist</strong>(set) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
reformat ASN1 into attr=>[vals]
</p>
<pre class="code">
    AttributeList ::= SEQUENCE OF SEQUENCE {
           type    AttributeDescription,
           vals    SET OF AttributeValue }</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 223</span>

<span class='kw'>def</span> <span class='id attributelist'>attributelist</span><span class='lparen'>(</span><span class='id set'>set</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id av'>av</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id set'>set</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id seq'>seq</span><span class='op'>|</span>
    <span class='id a'>a</span> <span class='op'>=</span> <span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='kw'>if</span> <span class='ivar'>@schema</span>
      <span class='id a'>a</span> <span class='op'>=</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id find_attrtype'>find_attrtype</span><span class='lparen'>(</span><span class='id a'>a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='kw'>end</span>
    <span class='id v'>v</span> <span class='op'>=</span> <span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id asn1'>asn1</span><span class='op'>|</span> <span class='id asn1'>asn1</span><span class='period'>.</span><span class='id value'>value</span>  <span class='rbrace'>}</span>
    <span class='comment'># Not clear from the spec whether the same attribute (with
</span>    <span class='comment'># distinct values) can appear more than once in AttributeList
</span>    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>AttributeOrValueExists</span><span class='comma'>,</span> <span class='id a'>a</span> <span class='kw'>if</span> <span class='id av'>av</span><span class='lbracket'>[</span><span class='id a'>a</span><span class='rbracket'>]</span>
    <span class='id av'>av</span><span class='lbracket'>[</span><span class='id a'>a</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id v'>v</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id av'>av</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="compare-instance_method">
  
    - (<tt>Object</tt>) <strong>compare</strong>(entry, attr, val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a compare request; override this. Return true or false, or raise an
exception for errors.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 481</span>

<span class='kw'>def</span> <span class='id compare'>compare</span><span class='lparen'>(</span><span class='id entry'>entry</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>compare not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="del-instance_method">
  
    - (<tt>Object</tt>) <strong>del</strong>(dn) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a del request; override this
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 468</span>

<span class='kw'>def</span> <span class='id del'>del</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>delete not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_add-instance_method">
  
    - (<tt>Object</tt>) <strong>do_add</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331
332
333
334
335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 325</span>

<span class='kw'>def</span> <span class='id do_add'>do_add</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id av'>av</span> <span class='op'>=</span> <span class='id attributelist'>attributelist</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id add'>add</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='comma'>,</span> <span class='id av'>av</span><span class='rparen'>)</span>
  <span class='id send_AddResponse'>send_AddResponse</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_AddResponse'>send_AddResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># no response
</span><span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_AddResponse'>send_AddResponse</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultCode</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_bind-instance_method">
  
    - (<tt>Object</tt>) <strong>do_bind</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
######################################## # Methods to parse each request
type ### ########################################
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 191</span>

<span class='kw'>def</span> <span class='id do_bind'>do_bind</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id version'>version</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id dn'>dn</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id authentication'>authentication</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>

  <span class='kw'>case</span> <span class='id authentication'>authentication</span><span class='period'>.</span><span class='id tag'>tag</span>   <span class='comment'># tag_class == :CONTEXT_SPECIFIC (check why)
</span>  <span class='kw'>when</span> <span class='int'>0</span>
    <span class='id simple_bind'>simple_bind</span><span class='lparen'>(</span><span class='id version'>version</span><span class='comma'>,</span> <span class='id dn'>dn</span><span class='comma'>,</span> <span class='id authentication'>authentication</span><span class='period'>.</span><span class='id value'>value</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='int'>3</span>
    <span class='id mechanism'>mechanism</span> <span class='op'>=</span> <span class='id authentication'>authentication</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='id credentials'>credentials</span> <span class='op'>=</span> <span class='id authentication'>authentication</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='comment'># sasl_bind(version, dn, mechanism, credentials)
</span>    <span class='comment'># FIXME: needs to exchange further BindRequests
</span>    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>AuthMethodNotSupported</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>ProtocolError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BindRequest bad AuthenticationChoice</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id send_BindResponse'>send_BindResponse</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id dn'>dn</span><span class='comma'>,</span> <span class='id version'>version</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_BindResponse'>send_BindResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id version'>version</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_compare-instance_method">
  
    - (<tt>Object</tt>) <strong>do_compare</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 373</span>

<span class='kw'>def</span> <span class='id do_compare'>do_compare</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id ava'>ava</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id attr'>attr</span> <span class='op'>=</span> <span class='id ava'>ava</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='kw'>if</span> <span class='ivar'>@schema</span>
    <span class='id attr'>attr</span> <span class='op'>=</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id find_attrtype'>find_attrtype</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='id val'>val</span> <span class='op'>=</span> <span class='id ava'>ava</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='kw'>if</span> <span class='id compare'>compare</span><span class='lparen'>(</span><span class='id entry'>entry</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='rparen'>)</span>
    <span class='id send_CompareResponse'>send_CompareResponse</span><span class='lparen'>(</span><span class='int'>6</span><span class='rparen'>)</span>  <span class='comment'># compareTrue
</span>  <span class='kw'>else</span>
    <span class='id send_CompareResponse'>send_CompareResponse</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>  <span class='comment'># compareFalse
</span>  <span class='kw'>end</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_CompareResponse'>send_CompareResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># no response
</span><span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_CompareResponse'>send_CompareResponse</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultCode</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_del-instance_method">
  
    - (<tt>Object</tt>) <strong>do_del</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348
349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 340</span>

<span class='kw'>def</span> <span class='id do_del'>do_del</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id del'>del</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='rparen'>)</span>
  <span class='id send_DelResponse'>send_DelResponse</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_DelResponse'>send_DelResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># no response
</span><span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_DelResponse'>send_DelResponse</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultCode</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_modify-instance_method">
  
    - (<tt>Object</tt>) <strong>do_modify</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 292</span>

<span class='kw'>def</span> <span class='id do_modify'>do_modify</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id dn'>dn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id modinfo'>modinfo</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id seq'>seq</span><span class='op'>|</span>
    <span class='id attr'>attr</span> <span class='op'>=</span> <span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='kw'>if</span> <span class='ivar'>@schema</span>
      <span class='id attr'>attr</span> <span class='op'>=</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id find_attrtype'>find_attrtype</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='kw'>end</span>
    <span class='id vals'>vals</span> <span class='op'>=</span> <span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id v'>v</span><span class='period'>.</span><span class='id value'>value</span> <span class='rbrace'>}</span>
    <span class='kw'>case</span> <span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='kw'>when</span> <span class='int'>0</span>
      <span class='id modinfo'>modinfo</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:add</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id vals'>vals</span>
    <span class='kw'>when</span> <span class='int'>1</span>
      <span class='id modinfo'>modinfo</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:delete</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id vals'>vals</span>
    <span class='kw'>when</span> <span class='int'>2</span>
      <span class='id modinfo'>modinfo</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:replace</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id vals'>vals</span>
    <span class='kw'>else</span>
      <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>ProtocolError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad modify operation </span><span class='embexpr_beg'>#{</span><span class='id seq'>seq</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id modify'>modify</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='comma'>,</span> <span class='id modinfo'>modinfo</span><span class='rparen'>)</span>
  <span class='id send_ModifyResponse'>send_ModifyResponse</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_ModifyResponse'>send_ModifyResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># no response
</span><span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_ModifyResponse'>send_ModifyResponse</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultCode</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_modifydn-instance_method">
  
    - (<tt>Object</tt>) <strong>do_modifydn</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 354</span>

<span class='kw'>def</span> <span class='id do_modifydn'>do_modifydn</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id newrdn'>newrdn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id deleteoldrdn'>deleteoldrdn</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='kw'>if</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>3</span> <span class='kw'>and</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id tag'>tag</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id newSuperior'>newSuperior</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='kw'>end</span>
  <span class='id modifydn'>modifydn</span><span class='lparen'>(</span><span class='id entry'>entry</span><span class='comma'>,</span> <span class='id newrdn'>newrdn</span><span class='comma'>,</span> <span class='id deleteoldrdn'>deleteoldrdn</span><span class='comma'>,</span> <span class='id newSuperior'>newSuperior</span><span class='rparen'>)</span>
  <span class='id send_ModifyDNResponse'>send_ModifyDNResponse</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>

<span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_ModifyDNResponse'>send_ModifyDNResponse</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># no response
</span><span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_ModifyDNResponse'>send_ModifyDNResponse</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultCode</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_search-instance_method">
  
    - (<tt>Object</tt>) <strong>do_search</strong>(protocolOp, controls) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 239</span>

<span class='kw'>def</span> <span class='id do_search'>do_search</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id controls'>controls</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id baseObject'>baseObject</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id scope'>scope</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id deref'>deref</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id client_sizelimit'>client_sizelimit</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id client_timelimit'>client_timelimit</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='ivar'>@typesOnly</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span>
  <span class='id filter'>filter</span> <span class='op'>=</span> <span class='const'>Filter</span><span class='op'>::</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@schema</span><span class='rparen'>)</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>7</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id x'>x</span><span class='op'>|</span> <span class='id x'>x</span><span class='period'>.</span><span class='id value'>value</span><span class='rbrace'>}</span>

  <span class='ivar'>@rescount</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@sizelimit</span> <span class='op'>=</span> <span class='id server_sizelimit'>server_sizelimit</span>
  <span class='ivar'>@sizelimit</span> <span class='op'>=</span> <span class='id client_sizelimit'>client_sizelimit</span> <span class='kw'>if</span> <span class='id client_sizelimit'>client_sizelimit</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='kw'>and</span>
               <span class='lparen'>(</span><span class='ivar'>@sizelimit</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id client_sizelimit'>client_sizelimit</span> <span class='op'>&lt;</span> <span class='ivar'>@sizelimit</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id baseObject'>baseObject</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>and</span> <span class='id scope'>scope</span> <span class='op'>==</span> <span class='const'>BaseObject</span>
    <span class='id send_SearchResultEntry'>send_SearchResultEntry</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@server</span><span class='period'>.</span><span class='id root_dse'>root_dse</span><span class='rparen'>)</span> <span class='kw'>if</span>
      <span class='ivar'>@server</span><span class='period'>.</span><span class='id root_dse'>root_dse</span> <span class='kw'>and</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>Server</span><span class='op'>::</span><span class='const'>Filter</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='id filter'>filter</span><span class='comma'>,</span> <span class='ivar'>@server</span><span class='period'>.</span><span class='id root_dse'>root_dse</span><span class='rparen'>)</span>
    <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>elsif</span> <span class='ivar'>@schema</span> <span class='kw'>and</span> <span class='id baseObject'>baseObject</span> <span class='op'>==</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id subschema_dn'>subschema_dn</span>
    <span class='id send_SearchResultEntry'>send_SearchResultEntry</span><span class='lparen'>(</span><span class='id baseObject'>baseObject</span><span class='comma'>,</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id subschema_subentry'>subschema_subentry</span><span class='rparen'>)</span> <span class='kw'>if</span>
      <span class='ivar'>@schema</span> <span class='kw'>and</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id subschema_subentry'>subschema_subentry</span> <span class='kw'>and</span>
      <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>Server</span><span class='op'>::</span><span class='const'>Filter</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='id filter'>filter</span><span class='comma'>,</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id subschema_subentry'>subschema_subentry</span><span class='rparen'>)</span>
    <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id t'>t</span> <span class='op'>=</span> <span class='id server_timelimit'>server_timelimit</span> <span class='op'>||</span> <span class='int'>10</span>
  <span class='id t'>t</span> <span class='op'>=</span> <span class='id client_timelimit'>client_timelimit</span> <span class='kw'>if</span> <span class='id client_timelimit'>client_timelimit</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='kw'>and</span> <span class='id client_timelimit'>client_timelimit</span> <span class='op'>&lt;</span> <span class='id t'>t</span>

  <span class='const'>Timeout</span><span class='op'>::</span><span class='id timeout'>timeout</span><span class='lparen'>(</span><span class='id t'>t</span><span class='comma'>,</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>TimeLimitExceeded</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id search'>search</span><span class='lparen'>(</span><span class='id baseObject'>baseObject</span><span class='comma'>,</span> <span class='id scope'>scope</span><span class='comma'>,</span> <span class='id deref'>deref</span><span class='comma'>,</span> <span class='id filter'>filter</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>

<span class='comment'># Note that TimeLimitExceeded is a subclass of LDAP::ResultError
</span><span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='id e'>e</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>

<span class='kw'>rescue</span> <span class='const'>Abandon</span>
  <span class='comment'># send no response
</span>
<span class='comment'># Since this Operation is running in its own thread, we have to
</span><span class='comment'># catch all other exceptions. Otherwise, in the event of a programming
</span><span class='comment'># error, this thread will silently terminate and the client will wait
</span><span class='comment'># forever for a response.
</span>
<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>OperationsError</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:errorMessage</span><span class='op'>=&gt;</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="log-instance_method">
  
    - (<tt>Object</tt>) <strong>log</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Send a log message
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 43</span>

<span class='kw'>def</span> <span class='id log'>log</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id log'>log</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="log_exception-instance_method">
  
    - (<tt>Object</tt>) <strong>log_exception</strong>(e) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Send an exception report to the log
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 49</span>

<span class='kw'>def</span> <span class='id log_exception'>log_exception</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\tfrom </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="modify-instance_method">
  
    - (<tt>Object</tt>) <strong>modify</strong>(dn, modification) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a modify request; override this
</p>
<p>
dn is the object to modify; modification is a hash of
</p>
<pre class="code">
  attr =&gt; [:add, val, val...]       -- add operation
  attr =&gt; [:replace, val, val...]   -- replace operation
  attr =&gt; [:delete, val, val...]    -- delete these values
  attr =&gt; [:delete]                 -- delete all values</pre>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


451
452
453</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 451</span>

<span class='kw'>def</span> <span class='id modify'>modify</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='comma'>,</span> <span class='id modification'>modification</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>modify not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="modifydn-instance_method">
  
    - (<tt>Object</tt>) <strong>modifydn</strong>(entry, newrdn, deleteoldrdn, newSuperior) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a modifydn request; override this
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 474</span>

<span class='kw'>def</span> <span class='id modifydn'>modifydn</span><span class='lparen'>(</span><span class='id entry'>entry</span><span class='comma'>,</span> <span class='id newrdn'>newrdn</span><span class='comma'>,</span> <span class='id deleteoldrdn'>deleteoldrdn</span><span class='comma'>,</span> <span class='id newSuperior'>newSuperior</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>modifydn not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search-instance_method">
  
    - (<tt>Object</tt>) <strong>search</strong>(basedn, scope, deref, filter, attrs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a search request; override this.
</p>
<p>
Call send_SearchResultEntry for each result found. Raise an exception if
there is a problem. timeLimit, sizeLimit and typesOnly are taken care of,
but you need to perform all authorisation checks yourself, using
@connection.binddn
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../ResultError/UnwillingToPerform.html" title="LDAP::ResultError::UnwillingToPerform (class)">LDAP::ResultError::UnwillingToPerform</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 439</span>

<span class='kw'>def</span> <span class='id search'>search</span><span class='lparen'>(</span><span class='id basedn'>basedn</span><span class='comma'>,</span> <span class='id scope'>scope</span><span class='comma'>,</span> <span class='id deref'>deref</span><span class='comma'>,</span> <span class='id filter'>filter</span><span class='comma'>,</span> <span class='id attrs'>attrs</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>UnwillingToPerform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>search not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_AddResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_AddResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 160</span>

<span class='kw'>def</span> <span class='id send_AddResponse'>send_AddResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>9</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_BindResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_BindResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91
92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 89</span>

<span class='kw'>def</span> <span class='id send_BindResponse'>send_BindResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id resp'>resp</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:serverSaslCreds</span><span class='rbracket'>]</span>
      <span class='id resp'>resp</span> <span class='op'>&lt;&lt;</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:serverSaslCreds</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_CompareResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_CompareResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 172</span>

<span class='kw'>def</span> <span class='id send_CompareResponse'>send_CompareResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>15</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_DelResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_DelResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 164</span>

<span class='kw'>def</span> <span class='id send_DelResponse'>send_DelResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>11</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_ExtendedResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_ExtendedResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 176</span>

<span class='kw'>def</span> <span class='id send_ExtendedResponse'>send_ExtendedResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>24</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id resp'>resp</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:responseName</span><span class='rbracket'>]</span>
      <span class='id resp'>resp</span> <span class='op'>&lt;&lt;</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:responseName</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span>
      <span class='id resp'>resp</span> <span class='op'>&lt;&lt;</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_LDAPMessage-instance_method">
  
    - (<tt>Object</tt>) <strong>send_LDAPMessage</strong>(protocolOp, opt = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
################################################ # Utility methods to send
protocol responses ### ################################################
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 57</span>

<span class='kw'>def</span> <span class='id send_LDAPMessage'>send_LDAPMessage</span><span class='lparen'>(</span><span class='id protocolOp'>protocolOp</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@respEnvelope</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id protocolOp'>protocolOp</span>
  <span class='kw'>if</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:controls</span><span class='rbracket'>]</span>
    <span class='ivar'>@respEnvelope</span><span class='period'>.</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Set</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:controls</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='const'>APPLICATION</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@respEnvelope</span><span class='period'>.</span><span class='id value'>value</span><span class='period'>.</span><span class='id delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='kw'>false</span> <span class='comment'># $debug
</span>    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Response:</span><span class='tstring_end'>&quot;</span></span>
    <span class='id p'>p</span> <span class='ivar'>@respEnvelope</span>
    <span class='id p'>p</span> <span class='ivar'>@respEnvelope</span><span class='period'>.</span><span class='id to_der'>to_der</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>H*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='ivar'>@respEnvelope</span><span class='period'>.</span><span class='id to_der'>to_der</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_LDAPResult-instance_method">
  
    - (<tt>Object</tt>) <strong>send_LDAPResult</strong>(tag, resultCode, opt = {}) {|seq| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>seq</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 74</span>

<span class='kw'>def</span> <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id seq'>seq</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Enumerated</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:matchedDN</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:errorMessage</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:referral</span><span class='rbracket'>]</span>
    <span class='id rs'>rs</span> <span class='op'>=</span> <span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:referral</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id r'>r</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id seq'>seq</span> <span class='op'>&lt;&lt;</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='id rs'>rs</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>yield</span> <span class='id seq'>seq</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>   <span class='comment'># opportunity to add more elements
</span>    
  <span class='id send_LDAPMessage'>send_LDAPMessage</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='id seq'>seq</span><span class='comma'>,</span> <span class='id tag'>tag</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_ModifyDNResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_ModifyDNResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 168</span>

<span class='kw'>def</span> <span class='id send_ModifyDNResponse'>send_ModifyDNResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>13</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_ModifyResponse-instance_method">
  
    - (<tt>Object</tt>) <strong>send_ModifyResponse</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 156</span>

<span class='kw'>def</span> <span class='id send_ModifyResponse'>send_ModifyResponse</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>7</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_SearchResultDone-instance_method">
  
    - (<tt>Object</tt>) <strong>send_SearchResultDone</strong>(resultCode, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 152</span>

<span class='kw'>def</span> <span class='id send_SearchResultDone'>send_SearchResultDone</span><span class='lparen'>(</span><span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPResult'>send_LDAPResult</span><span class='lparen'>(</span><span class='int'>5</span><span class='comma'>,</span> <span class='id resultCode'>resultCode</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_SearchResultEntry-instance_method">
  
    - (<tt>Object</tt>) <strong>send_SearchResultEntry</strong>(dn, avs, opt = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Send a found entry. Avs are attr2=>[val2,val3] If schema
given, return operational attributes only if explicitly requested
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 101</span>

<span class='kw'>def</span> <span class='id send_SearchResultEntry'>send_SearchResultEntry</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='comma'>,</span> <span class='id avs'>avs</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@rescount</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>if</span> <span class='ivar'>@sizelimit</span>
    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>SizeLimitExceeded</span> <span class='kw'>if</span> <span class='ivar'>@rescount</span> <span class='op'>&gt;</span> <span class='ivar'>@sizelimit</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@schema</span>
    <span class='comment'># normalize the attribute names
</span>    <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id find_attrtype'>find_attrtype</span><span class='lparen'>(</span><span class='id a'>a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id sendall'>sendall</span> <span class='op'>=</span> <span class='ivar'>@attributes</span> <span class='op'>==</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id avseq'>avseq</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id avs'>avs</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id vals'>vals</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@attributes</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id sendall'>sendall</span>
      <span class='kw'>if</span> <span class='ivar'>@schema</span>
        <span class='id a'>a</span> <span class='op'>=</span> <span class='ivar'>@schema</span><span class='period'>.</span><span class='id find_attrtype'>find_attrtype</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id a'>a</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id a'>a</span><span class='period'>.</span><span class='id usage'>usage</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id a'>a</span><span class='period'>.</span><span class='id usage'>usage</span> <span class='op'>==</span> <span class='symbol'>:userApplications</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='ivar'>@typesOnly</span>
      <span class='id vals'>vals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> 
    <span class='kw'>else</span>
      <span class='id vals'>vals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id vals'>vals</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id vals'>vals</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
      <span class='comment'># FIXME: optionally do a value_to_s conversion here?
</span>      <span class='comment'># FIXME: handle attribute;binary
</span>    <span class='kw'>end</span>

    <span class='id avseq'>avseq</span> <span class='op'>&lt;&lt;</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='lbracket'>[</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Set</span><span class='lparen'>(</span><span class='id vals'>vals</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id v'>v</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id send_LDAPMessage'>send_LDAPMessage</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='lbracket'>[</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id dn'>dn</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span><span class='id avseq'>avseq</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='comma'>,</span> <span class='symbol'>:APPLICATION</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_SearchResultReference-instance_method">
  
    - (<tt>Object</tt>) <strong>send_SearchResultReference</strong>(urls, opt = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 144</span>

<span class='kw'>def</span> <span class='id send_SearchResultReference'>send_SearchResultReference</span><span class='lparen'>(</span><span class='id urls'>urls</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id send_LDAPMessage'>send_LDAPMessage</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Sequence</span><span class='lparen'>(</span>
      <span class='id urls'>urls</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id url'>url</span><span class='op'>|</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>OctetString</span><span class='lparen'>(</span><span class='id url'>url</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id opt'>opt</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="server_sizelimit-instance_method">
  
    - (<tt>Object</tt>) <strong>server_sizelimit</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Server-set maximum size limit. Override for more complex behaviour (e.g.
limit depends on @connection.binddn). Return nil for unlimited.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 410</span>

<span class='kw'>def</span> <span class='id server_sizelimit'>server_sizelimit</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:sizelimit</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="server_timelimit-instance_method">
  
    - (<tt>Object</tt>) <strong>server_timelimit</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Server-set maximum time limit. Override for more complex behaviour (e.g.
limit depends on @connection.binddn). Nil uses hardcoded default.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


403
404
405</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 403</span>

<span class='kw'>def</span> <span class='id server_timelimit'>server_timelimit</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:timelimit</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="simple_bind-instance_method">
  
    - (<tt>Object</tt>) <strong>simple_bind</strong>(version, dn, password) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Handle a simple bind request; raise an exception if the bind is not
acceptable, otherwise just return to accept the bind.
</p>
<p>
Override this method in your own subclass.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427
428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldap/server/operation.rb', line 423</span>

<span class='kw'>def</span> <span class='id simple_bind'>simple_bind</span><span class='lparen'>(</span><span class='id version'>version</span><span class='comma'>,</span> <span class='id dn'>dn</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id version'>version</span> <span class='op'>!=</span> <span class='int'>3</span>
    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>ProtocolError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>version 3 only</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id dn'>dn</span>
    <span class='id raise'>raise</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span><span class='op'>::</span><span class='const'>InappropriateAuthentication</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This server only supports anonymous bind</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Sep 13 13:27:16 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.0 (ruby-1.9.2).
</div>

  </body>
</html>